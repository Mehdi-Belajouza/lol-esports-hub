<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Team Page - Example</title>
  <link rel="stylesheet" href="../css/teampage.css">
  <link rel="stylesheet" href="../css/unified.css">
</head>
<body>
 <nav class="main-nav">
        <div class="nav-container">
            <a href="#" class="logo">
                <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRybi3YHkS2ntJA7D7MGNdR90q0TvJlA9ezBw&s" alt="TEF Logo" class="logo-img">
                <span>Tunisian Esports Federation</span>
            </a>
            <div class="nav-links">
                <a href="../teams/index.html" class="nav-link">Home</a>
            </div>
        </div>
    </nav>
<div class="team-page">
  <!-- Sidebar -->
   
  <aside class="team-sidebar">
      <div class="sidebar-box">
        <!-- JS will fill this -->
      </div>
  </aside>

    <!-- Main content -->
    <main class="team-content">
       
    </main>
      <!-- Achievements Section -->
    <div class="section achievements">
        <h2>Achievements</h2>
        <ul>
        <li>2023 - Won Regional League</li>
        <li>2024 - Qualified for EMEA Masters</li>
        </ul>
    </div>
</div>


  <!-- Player Modal -->
<div id="playerModal" class="modal">
    <div class="modal-content">
      <span class="close-btn" onclick="closeModal()">&times;</span>
      <h2 id="playerName">Player Name</h2>
      <p id="playerRole"><strong>Role:</strong> </p>
      <p id="playerKDA"><strong>KDA:</strong> </p>
      <p id="playerCS"><strong>CS/Min:</strong> </p>
      <p id="playerWin"><strong>Win Rate:</strong> </p>
    </div>
  </div>
<script src="../data/sample/teams.js"></script>

<script>
document.addEventListener("DOMContentLoaded", () => {
    // Toggle functionality
    function setupToggles() {
        document.querySelectorAll('.discipline-toggle').forEach(button => {
            button.addEventListener('click', () => {
                const roster = button.nextElementSibling;
                roster.style.display = roster.style.display === 'grid' ? 'none' : 'grid';
            });
        });
    }

    // Get team ID from URL
    const urlParams = new URLSearchParams(window.location.search);
    const teamId = parseInt(urlParams.get('id'));

    // Find the team in teamsData
    const team = teamsData.find(t => t.id === teamId);

    if (team) {
         // Enhanced sidebar with Liquipedia/Leaguepedia styling
        document.querySelector(".sidebar-box").innerHTML = `
            <div class="team-header">
                <img src="../data/teams/${team.logo}.png" alt="${team.name}" class="sidebar-logo">
                <h2 class="team-name">${team.name}</h2>
            </div>

            <div class="team-info-section">
                <div class="info-row">
                    <span class="info-label">Founded:</span>
                    <span class="info-value">${team.founded}</span>
                </div>
                <div class="info-row">
                    <span class="info-label">Region:</span>
                    <span class="info-value">Tunisia</span>
                </div>
                <div class="info-row">
                    <span class="info-label">Disciplines:</span>
                    <span class="info-value">${team.disciplines.join(", ")}</span>
                </div>
            </div>

             <div class="team-description-section">
                <h3 class="section-title">About</h3>
                <p class="team-description">${team.description}</p>
            </div>

            <div class="team-stats-section">
                <h3 class="section-title">Achievements</h3>
                <div class="stats-grid">
                    <div class="stat-item">
                        <span class="stat-number">${team.stats.tournaments}</span>
                        <span class="stat-label">Tournaments</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number">${team.stats.wins}</span>
                        <span class="stat-label">Wins</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number">${team.stats.players}</span>
                        <span class="stat-label">Players</span>
                    </div>
                </div>
            </div>

            <div class="team-socials-section">
                <div class="team-socials">
                    ${team.twitter ? `
                        <a href="${team.twitter}" target="_blank" class="social-link twitter" title="Twitter">
                            <svg viewBox="0 0 24 24" class="social-icon">
                                <path fill="currentColor" d="M22.46 6c-.77.35-1.6.58-2.46.69.88-.53 1.56-1.37 1.88-2.38-.83.5-1.75.85-2.72 1.05C18.37 4.5 17.26 4 16 4c-2.35 0-4.27 1.92-4.27 4.29 0 .34.04.67.11.98C8.28 9.09 5.11 7.38 3 4.79c-.37.63-.58 1.37-.58 2.15 0 1.49.75 2.81 1.91 3.56-.71 0-1.37-.2-1.95-.5v.03c0 2.08 1.48 3.82 3.44 4.21a4.22 4.22 0 0 1-1.93.07 4.28 4.28 0 0 0 4 2.98 8.521 8.521 0 0 1-5.33 1.84c-.34 0-.68-.02-1.02-.06C3.44 20.29 5.7 21 8.12 21 16 21 20.33 14.46 20.33 8.79c0-.19 0-.37-.01-.56.84-.6 1.56-1.36 2.14-2.23z"/>
                            </svg>
                        </a>
                    ` : ''}
                    ${team.instagram ? `
                        <a href="${team.instagram}" target="_blank" class="social-link instagram" title="Instagram">
                            <svg viewBox="0 0 24 24" class="social-icon">
                                <path fill="currentColor" d="M7.8 2h8.4C19.4 2 22 4.6 22 7.8v8.4a5.8 5.8 0 0 1-5.8 5.8H7.8C4.6 22 2 19.4 2 16.2V7.8A5.8 5.8 0 0 1 7.8 2m-.2 2A3.6 3.6 0 0 0 4 7.6v8.8C4 18.39 5.61 20 7.6 20h8.8a3.6 3.6 0 0 0 3.6-3.6V7.6C20 5.61 18.39 4 16.4 4H7.6m9.65 1.5a1.25 1.25 0 0 1 1.25 1.25A1.25 1.25 0 0 1 17.25 8 1.25 1.25 0 0 1 16 6.75a1.25 1.25 0 0 1 1.25-1.25M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3z"/>
                            </svg>
                        </a>
                    ` : ''}
                    ${team.twitch ? `
                        <a href="${team.twitch}" target="_blank" class="social-link twitch" title="Twitch">
                            <svg viewBox="0 0 24 24" class="social-icon">
                                <path fill="currentColor" d="M11.64 5.93h1.43v4.28h-1.43m3.93-4.28H17v4.28h-1.43M7 2L3.43 5.57v12.86h4.28V22l3.58-3.57h2.85L20.57 12V2m-1.43 9.29l-2.85 2.85h-2.86l-2.5 2.5v-2.5H7.71V3.43h11.43Z"/>
                            </svg>
                        </a>
                    ` : ''}
                    ${team.facebook ? `
                        <a href="${team.facebook}" target="_blank" class="social-link facebook" title="Facebook">
                            <svg viewBox="0 0 24 24" class="social-icon">
                                <path fill="currentColor" d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
                            </svg>
                        </a>
                    ` : ''}
                    ${team.youtube ? `
                        <a href="${team.youtube}" target="_blank" class="social-link youtube" title="YouTube">
                            <svg viewBox="0 0 24 24" class="social-icon">
                                <path fill="currentColor" d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/>
                            </svg>
                        </a>
                    ` : ''}
                    ${team.discord ? `
                        <a href="${team.discord}" target="_blank" class="social-link discord" title="Discord">
                            <svg viewBox="0 0 24 24" class="social-icon">
                                <path fill="currentColor" d="M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0 12.64 12.64 0 0 0-.617-1.25.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057 19.9 19.9 0 0 0 5.993 3.03.078.078 0 0 0 .084-.028 14.09 14.09 0 0 0 1.226-1.994.076.076 0 0 0-.041-.106 13.107 13.107 0 0 1-1.872-.892.077.077 0 0 1-.008-.128 10.2 10.2 0 0 0 .372-.292.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127 12.299 12.299 0 0 1-1.873.892.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028 19.839 19.839 0 0 0 6.002-3.03.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.956-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.955-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.946 2.418-2.157 2.418z"/>
                            </svg>
                        </a>
                    ` : ''}
                </div>
            </div>

        `;

        // Add roster switching functionality
        window.showRoster = function(discipline, teamId) {
            // Remove active class from all tabs and roster lists
            document.querySelectorAll('.roster-tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.roster-list').forEach(list => list.classList.remove('active'));
            
            // Add active class to clicked tab and corresponding roster list
            event.target.classList.add('active');
            document.getElementById(`roster-${discipline.replace(/\s+/g, '-')}-${teamId}`).classList.add('active');
        };

        
        // Render disciplines (always render players, then try to enhance with JSON)
        const content = document.querySelector(".team-content");
        content.innerHTML = "";

        Object.entries(team.players).forEach(([discipline, roster]) => {
            let sectionHtml = `
                <section class="discipline">
                    <button class="discipline-toggle">${discipline} â–¼</button>
                    <div class="discipline-roster">
                        ${roster.map(player => `
                            <div class="player-face" data-player="${player.name.toLowerCase()}">
                                <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRrhBE4qtIKpJXd6oyO1fOIMA0fstRMiKqX4ef41lbK_fWFfJXL6hXjHAGGEBfYI3elf7o&usqp=CAU" alt="${player.name}">
                                <p>${player.name}</p>
                                <span>${player.role}</span>
                            </div>
                        `).join("")}
                    </div>
                </section>
            `;

            content.innerHTML += sectionHtml;
        });

        // After rendering, try to replace avatars dynamically
        document.querySelectorAll(".player-face").forEach(face => {
            const playerKey = face.getAttribute("data-player");
            const playerFile = `../data/players/${playerKey}.json`;

            fetch(playerFile)
                .then(res => {
                    if (!res.ok) throw new Error("No JSON for " + playerKey);
                    return res.json();
                })
                .then(playerData => {
                    const img = face.querySelector("img");
                    img.src = playerData.avatar || img.src; // replace only if available
                })
                .catch(() => {
                    // No JSON? keep placeholder, do nothing
                });
        });

        // Re-bind toggles
        setupToggles();



    }
});
</script>


</body>
</html>
